<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Flood Early Warning System</title>
    <meta name="description" content="A responsive, accessible landing page for a Flood Early Warning System with alert signup, status dashboard, and FAQs." />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Nunito:wght@700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://unpkg.com/leaflet/dist/leaflet.css" />
    <style>
        :root {
            --bg: #0b1220;
            --panel: #111a2b;
            --muted: #90a4b8;
            --text: #e6eef8;
            --brand: #34c6ff;
            --brand-2: #4ade80;
            --accent: #ffd166;
            --danger: #ff6b6b;
            --radius: 16px;
            --shadow: 0 10px 30px rgba(0, 0, 0, 0.35);
            --maxw: 1100px;
        }

        @media (prefers-color-scheme: light) {
            :root {
                --bg: #f7fbff;
                --panel: #ffffff;
                --text: #0b1220;
                --muted: #55657a;
                --shadow: 0 10px 25px rgba(10, 30, 60, 0.08);
            }
            body {
                background: radial-gradient(1200px 600px at 10% -20%, #e6f7ff 0, rgba(0, 0, 0, 0) 60%), var(--bg) !important;
            }
        }

        * { box-sizing: border-box }
        html, body { height: 100% }
        body {
            margin: 0;
            font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
            color: var(--text);
            background: radial-gradient(1200px 600px at 80% -10%, rgba(52, 198, 255, .15), rgba(0, 0, 0, 0) 60%), var(--bg);
            line-height: 1.5;
            -webkit-font-smoothing: antialiased;
        }
        a { color: var(--brand); text-decoration: none }
        a:hover { text-decoration: underline }

        .skip-link {
            position: absolute;
            left: -9999px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden
        }
        .skip-link:focus {
            left: 1rem;
            top: 1rem;
            width: auto;
            height: auto;
            background: #000;
            color: #fff;
            padding: .5rem .75rem;
            border-radius: 8px
        }

        header {
            position: sticky;
            top: 0;
            z-index: 50;
            backdrop-filter: saturate(180%) blur(8px);
            background: color-mix(in srgb, var(--bg) 80%, transparent);
            border-bottom: 1px solid color-mix(in srgb, var(--text) 12%, transparent);
        }
        .nav {
            max-width: var(--maxw);
            margin: 0 auto;
            display: flex;
            align-items: center;
            gap: 1rem;
            padding: .8rem 1rem
        }
        .brand {
            display: flex;
            align-items: center;
            gap: .6rem;
            font-weight: 800;
            letter-spacing: .3px
        }
        .brand .logo {
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: grid;
            place-items: center;
            background: linear-gradient(145deg, var(--brand), var(--brand-2));
            color: #00111a;
            font-weight: 900;
            box-shadow: var(--shadow)
        }
        .nav a.btn { margin-left: auto }
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: .5rem;
            border: none;
            border-radius: 999px;
            padding: .7rem 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: transform .08s ease;
            box-shadow: var(--shadow);
            background: linear-gradient(120deg, var(--brand), var(--brand-2));
            color: #00202c
        }
        .btn:hover { transform: translateY(-1px) }
        .btn.secondary {
            background: var(--panel);
            color: var(--text);
            border: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
            box-shadow: none
        }

        .container {
            max-width: var(--maxw);
            margin: 0 auto;
            padding: clamp(16px, 2.4vw, 28px)
        }
        .hero {
            display: grid;
            grid-template-columns: 1.1fr 1fr;
            gap: 2rem;
            align-items: center;
            padding: 2rem 1rem
        }
        .hero h1 {
            font-family: Nunito, Inter, sans-serif;
            font-size: clamp(2rem, 4.5vw, 3.4rem);
            line-height: 1.05;
            margin: .2rem 0 1rem;
            letter-spacing: .3px
        }
        .hero p {
            color: var(--muted);
            font-size: clamp(1rem, 1.6vw, 1.15rem)
        }
        .hero-card {
            background: linear-gradient(180deg, color-mix(in srgb, var(--panel) 80%, transparent), var(--panel));
            border: 1px solid color-mix(in srgb, var(--text) 10%, transparent);
            border-radius: var(--radius);
            padding: 1rem;
            box-shadow: var(--shadow)
        }
        .kpis {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem;
            margin-top: 1rem
        }
        .kpi {
            background: color-mix(in srgb, var(--panel) 92%, transparent);
            border-radius: 14px;
            padding: .9rem;
            border: 1px dashed color-mix(in srgb, var(--text) 10%, transparent)
        }
        .kpi .label { color: var(--muted); font-size: .9rem }
        .kpi .value { font-weight: 800; font-size: 1.4rem }
        .grid { display: grid; gap: 1rem }
        .grid.features { grid-template-columns: repeat(3, 1fr) }
        .card {
            background: var(--panel);
            border-radius: var(--radius);
            padding: 1rem;
            border: 1px solid color-mix(in srgb, var(--text) 12%, transparent)
        }
        .card h3 { margin: .2rem 0 .6rem }
        .badge {
            display: inline-block;
            padding: .18rem .5rem;
            font-size: .75rem;
            border-radius: 999px;
            background: color-mix(in srgb, var(--brand) 20%, transparent);
            color: color-mix(in srgb, var(--brand) 80%, #053244)
        }
        .how {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 1rem
        }
        .how .step { position: relative; padding-left: 2.6rem }
        .how .num {
            position: absolute;
            left: 0;
            top: .1rem;
            width: 2rem;
            height: 2rem;
            border-radius: 10px;
            display: grid;
            place-items: center;
            background: linear-gradient(135deg, var(--brand), var(--brand-2));
            color: #00111a;
            font-weight: 800
        }
        .map {
            height: 320px;
            border: 2px dashed color-mix(in srgb, var(--text) 14%, transparent);
            border-radius: var(--radius);
        }
        form { display: grid; gap: .8rem }
        label { font-weight: 600 }
        input, select {
            width: 100%;
            padding: .75rem .9rem;
            border-radius: 12px;
            border: 1px solid color-mix(in srgb, var(--text) 12%, transparent);
            background: color-mix(in srgb, var(--panel) 92%, transparent);
            color: var(--text)
        }
        .row { display: grid; gap: .8rem; grid-template-columns: 1fr 1fr }
        .alerts { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem }
        .alert {
            border-left: 6px solid var(--accent);
            background: color-mix(in srgb, var(--panel) 92%, transparent);
            padding: .9rem;
            border-radius: 12px;
            border: 1px solid color-mix(in srgb, var(--text) 10%, transparent)
        }
        .alert.warning { border-left-color: var(--danger) }
        details {
            background: var(--panel);
            border: 1px solid color-mix(in srgb, var(--text) 12%, transparent);
            border-radius: 12px;
            padding: .8rem 1rem
        }
        details+details { margin-top: .6rem }
        summary { cursor: pointer; font-weight: 700 }
        footer {
            border-top: 1px solid color-mix(in srgb, var(--text) 12%, transparent);
            margin-top: 2rem
        }
        .footer-inner {
            max-width: var(--maxw);
            margin: 0 auto;
            padding: 1.2rem 1rem;
            color: var(--muted);
            font-size: .95rem;
            display: flex;
            flex-wrap: wrap;
            gap: .75rem;
            align-items: center;
            justify-content: space-between
        }
        .status-pill {
            display: inline-flex;
            gap: .4rem;
            align-items: center;
            padding: .25rem .6rem;
            border-radius: 999px;
            background: color-mix(in srgb, var(--brand-2) 25%, transparent);
            color: #022a10;
            font-weight: 700
        }
        .dot {
            width: .6rem;
            height: .6rem;
            border-radius: 50%;
            background: currentColor
        }
        .toast {
            position: fixed;
            right: 1rem;
            bottom: 1rem;
            background: var(--panel);
            border: 1px solid color-mix(in srgb, var(--text) 12%, transparent);
            box-shadow: var(--shadow);
            border-radius: 10px;
            padding: .8rem 1rem;
            display: none
        }
        @media (max-width: 980px) {
            .hero { grid-template-columns: 1fr }
            .grid.features { grid-template-columns: 1fr 1fr }
            .alerts { grid-template-columns: 1fr 1fr }
        }
        @media (max-width: 640px) {
            .row { grid-template-columns: 1fr }
            .grid.features { grid-template-columns: 1fr }
            .alerts { grid-template-columns: 1fr }
        }
    </style>
</head>
<body>
    <a href="#main" class="skip-link">Skip to content</a>
    <header>
        <nav class="nav" aria-label="Main">
            <div class="brand" aria-label="Flood Early Warning System">
                <div class="logo" aria-hidden="true">FEW</div>
                <span>Flood Watch</span>
            </div>
            <a class="btn secondary" href="#signup">Get Alerts</a>
        </nav>
    </header>

    <main id="main" class="container">
        <section class="hero" aria-labelledby="h1">
            <div>
                <span class="badge">Community Safety</span>
                <h1 id="h1">Stay Ahead of Floods with Real‑Time Alerts</h1>
                <p>
                    This demo shows how a Flood Early Warning System (FEWS) site can look and feel—mobile‑first,
                    accessible, and fast.
                    Users can subscribe to SMS/email alerts, view risk levels, and learn what to do before, during, and
                    after floods.
                </p>
                <div class="kpis">
                    <div class="kpi">
                        <div class="label">Active Gauges</div>
                        <div class="value" id="kpi-gauges">–</div>
                    </div>
                    <div class="kpi">
                        <div class="label">Districts Monitored</div>
                        <div class="value">36</div>
                    </div>
                    <div class="kpi">
                        <div class="label">Last Update</div>
                        <div class="value" id="kpi-updated">–</div>
                    </div>
                </div>
            </div>
            <div class="hero-card" aria-label="Status overview">
                <div style="display:flex; gap:.6rem; align-items:center; justify-content:space-between">
                    <strong>Current Status</strong>
                    <span class="status-pill" id="net-pill"><span class="dot"></span> Online</span>
                </div>
                <div class="grid features" style="margin-top:.8rem">
                    <div class="card">
                        <h3>River Level</h3>
                        <p><strong id="river-level">Normal</strong> · No immediate overflow risk.</p>
                    </div>
                    <div class="card">
                        <h3>Rainfall (24h)</h3>
                        <p><strong id="rainfall">12 mm</strong> · Light to moderate showers.</p>
                    </div>
                    <div class="card">
                        <h3>Advisory</h3>
                        <p><strong id="advisory">Green</strong> · Stay informed; no action required.</p>
                    </div>
                </div>
            </div>
        </section>

        <section aria-labelledby="how-title" class="container" style="padding-top:0">
            <h2 id="how-title">How it works</h2>
            <div class="how">
                <div class="step">
                    <div class="num" aria-hidden="true">1</div>
                    <h3>Sensors</h3>
                    <p>Automatic gauges track rainfall and river heights every 5 minutes.</p>
                </div>
                <div class="step">
                    <div class="num" aria-hidden="true">2</div>
                    <h3>Models</h3>
                    <p>Hydrology models forecast potential flooding 6–24 hours ahead.</p>
                </div>
                <div class="step">
                    <div class="num" aria-hidden="true">3</div>
                    <h3>Alerts</h3>
                    <p>When thresholds are crossed, SMS/email/app alerts are sent instantly.</p>
                </div>
            </div>
        </section>

        <section class="container" aria-labelledby="map-title">
            <h2 id="map-title">Risk Map (Demo)</h2>
            <div id="map" class="map" role="region" aria-label="Flood Risk Map of India"></div>
        </section>

        <section id="signup" class="container" aria-labelledby="sign-title">
            <h2 id="sign-title">Get Flood Alerts</h2>
            <div class="grid" style="grid-template-columns: 1.1fr 1fr">
                <div class="card">
                    <form id="alert-form" aria-describedby="privacy-note">
                        <div class="row">
                            <div>
                                <label for="name">Full Name</label>
                                <input id="name" name="name" autocomplete="name" placeholder="e.g., Jai Shah" required />
                            </div>
                            <div>
                                <label for="district">District</label>
                                <select id="district" name="district" required>
                                    <option value="">Choose…</option>
                                    <option>Mumbai</option>
                                    <option>Pune</option>
                                    <option>Nashik</option>
                                    <option>Thane</option>
                                    <option>Nagpur</option>
                                    <option>Satara</option>
                                    <option>Kolhapur</option>
                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <div>
                                <label for="phone">Phone (SMS)</label>
                                <input id="phone" name="phone" type="tel" inputmode="tel" placeholder="e.g., 98765 43210" aria-describedby="phone-help" />
                                <small id="phone-help" style="color:var(--muted)">Optional—enter either phone or email</small>
                            </div>
                            <div>
                                <label for="email">Email</label>
                                <input id="email" name="email" type="email" placeholder="you@example.com" />
                            </div>
                        </div>
                        <div class="row">
                            <div>
                                <label for="channel">Preferred Channel</label>
                                <select id="channel" name="channel">
                                    <option>SMS</option>
                                    <option>Email</option>
                                    <option>Both</option>
                                </select>
                            </div>
                            <div>
                                <label for="severity">Alert Severity</label>
                                <select id="severity" name="severity">
                                    <option>All</option>
                                    <option>Warning & above</option>
                                    <option>Emergency only</option>
                                </select>
                            </div>
                        </div>
                        <button class="btn" type="submit">Subscribe</button>
                        <p id="privacy-note" style="color:var(--muted); margin:.4rem 0 0">We only use your details to send safety alerts. Unsubscribe anytime.</p>
                    </form>
                </div>
                <div class="card">
                    <h3>Recent Alerts</h3>
                    <div class="alerts" id="alerts">
                        <article class="alert">
                            <strong>Advisory · Pune</strong>
                            <p style="margin:.3rem 0 0">Light rainfall expected. Stay informed.</p>
                            <small style="color:var(--muted)">Today · 09:00</small>
                        </article>
                        <article class="alert warning">
                            <strong>Warning · Kolhapur</strong>
                            <p style="margin:.3rem 0 0">River Panchganga rising. Avoid low‑lying areas.</p>
                            <small style="color:var(--muted)">Today · 07:40</small>
                        </article>
                        <article class="alert">
                            <strong>Advisory · Mumbai</strong>
                            <p style="margin:.3rem 0 0">High tide at 15:10. Watch for waterlogging.</p>
                            <small style="color:var(--muted)">Yesterday · 18:20</small>
                        </article>
                    </div>
                </div>
            </div>
        </section>

        <section class="container" aria-labelledby="prep-title">
            <h2 id="prep-title">What to do</h2>
            <div class="grid features">
                <div class="card">
                    <h3>Before</h3>
                    <ul>
                        <li>Save emergency numbers and pack a go‑bag.</li>
                        <li>Keep phone charged; enable location & alerts.</li>
                        <li>Know your nearest higher ground & shelters.</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>During</h3>
                    <ul>
                        <li>Do not walk or drive through floodwaters.</li>
                        <li>Move to higher floors; switch off mains power.</li>
                        <li>Follow official instructions only.</li>
                    </ul>
                </div>
                <div class="card">
                    <h3>After</h3>
                    <ul>
                        <li>Avoid stagnant water; watch for live wires.</li>
                        <li>Disinfect water; document damage for claims.</li>
                        <li>Help neighbors and check on the vulnerable.</li>
                    </ul>
                </div>
            </div>
        </section>

        <section class="container" aria-labelledby="faq-title">
            <h2 id="faq-title">FAQs</h2>
            <details>
                <summary>How are alerts decided?</summary>
                <p>Thresholds combine rainfall intensity, river levels, tide timings, and model forecasts. When a trigger is crossed, we send alerts for your district.</p>
            </details>
            <details>
                <summary>Will I be charged?</summary>
                <p>No. Alerts are free. Standard SMS/data rates from your carrier may apply.</p>
            </details>
            <details>
                <summary>Can I unsubscribe?</summary>
                <p>Yes—use the link in email, reply STOP to SMS, or revisit this page on the same device.</p>
            </details>
        </section>
    </main>

    <footer>
        <div class="footer-inner">
            <span>© <span id="year"></span> Flood Early Warning (Demo)</span>
            <span id="last-updated">Updated just now</span>
        </div>
    </footer>

    <div class="toast" id="toast" role="status" aria-live="polite">✅ Subscribed! You will now receive flood alerts.</div>

    <script src="https://unpkg.com/leaflet/dist/leaflet.js"></script>
    <script>
        // Set dynamic timestamps
        const fmt = new Intl.DateTimeFormat(undefined, { hour: '2-digit', minute: '2-digit' });
        document.getElementById('kpi-updated').textContent = new Date().toLocaleString();
        document.getElementById('year').textContent = new Date().getFullYear();
        document.getElementById('last-updated').textContent = `Data refreshed: ${new Date().toLocaleString()}`;

        // Fake sensors for the demo
        const gauges = 248 + Math.floor(Math.random() * 12);
        document.getElementById('kpi-gauges').textContent = gauges;

        // Network status pill
        const pill = document.getElementById('net-pill');
        function setOnlineStatus() {
            if (navigator.onLine) {
                pill.style.background = 'color-mix(in srgb, var(--brand-2) 25%, transparent)';
                pill.style.color = '#022a10';
                pill.innerHTML = '<span class="dot"></span> Online';
            } else {
                pill.style.background = 'color-mix(in srgb, var(--danger) 25%, transparent)';
                pill.style.color = '#300';
                pill.innerHTML = '<span class="dot"></span> Offline';
            }
        }
        window.addEventListener('online', setOnlineStatus);
        window.addEventListener('offline', setOnlineStatus);
        setOnlineStatus();

        // Form handling with basic validation + localStorage
        const form = document.getElementById('alert-form');
        const toast = document.getElementById('toast');

        function showToast(msg) {
            toast.textContent = msg;
            toast.style.display = 'block';
            setTimeout(() => toast.style.display = 'none', 3000);
        }

        form.addEventListener('submit', (e) => {
            e.preventDefault();
            const data = Object.fromEntries(new FormData(form).entries());
            if (!data.phone && !data.email) {
                showToast('Please provide a phone or email');
                return;
            }
            const subs = JSON.parse(localStorage.getItem('subs') || '[]');
            subs.push({ ...data, ts: Date.now() });
            localStorage.setItem('subs', JSON.stringify(subs));
            form.reset();
            showToast('✅ Subscribed! You will now receive flood alerts.');
            const alerts = document.getElementById('alerts');
            const card = document.createElement('article');
            card.className = 'alert';
            card.innerHTML = `<strong>Advisory · ${data.district || 'Your area'}</strong><p style="margin:.3rem 0 0">Subscription confirmed. You will receive ${data.channel || 'SMS'} updates.</p><small style="color:var(--muted)">Today · ${fmt.format(new Date())}</small>`;
            alerts.prepend(card);
        });

        // Reduce motion if user prefers
        if (matchMedia('(prefers-reduced-motion: reduce)').matches) {
            document.querySelectorAll('.btn').forEach(b => b.style.transition = 'none');
        }

        // Initialize Leaflet map
        const map = L.map('map').setView([22.9734, 78.6569], 5); // Center of India
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OSM</a> contributors'
        }).addTo(map);

        // Example alert markers
        const alerts = [
            { name: "Mumbai", coords: [19.0760, 72.8777], msg: "High tide at 15:10" },
            { name: "Pune", coords: [18.5204, 73.8567], msg: "Light rainfall expected" },
            { name: "Kolhapur", coords: [16.7050, 74.2433], msg: "River rising — avoid low-lying areas" }
            // {name: "Assam", coords: [26.2006, 92.9376],msg: "High water level risk of flood" }
        ];

        alerts.forEach(a => {
            L.marker(a.coords).addTo(map)
                .bindPopup(`<b>${a.name}</b><br>${a.msg}`);
        });

        // Keep map responsive
        window.addEventListener("resize", () => map.invalidateSize());
    </script>
</body>
</html>